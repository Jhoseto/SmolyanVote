(function () {
    var e = window.acceptCookies || {},
        t = e.showAnswered === undefined || (typeof e.showAnswered == "function" ? e.showAnswered() : e.showAnswered),
        c = e.clearOnReject !== undefined && e.clearOnReject,
        n = e.cookieName === undefined ? "acceptCookies" : e.cookieName,
        o = e.wpDict === undefined ? "mcmp-nms-cookie-bar" : e.wpDict,
        i = (window.wp && window.wp.i18n && window.wp.i18n.__) || function (e, t) { return e; },
        a = e.content === undefined
            ? i("<h3>We use cookies</h3><p>We use analytical cookies to improve your browsing experience on our website, and to analyze our website traffic.</p>", o)
            : e.content,
        s = e.accept === undefined ? i("ACCEPT", o) : e.accept,
        d = e.reject === undefined ? i("REJECT", o) : e.reject,
        r = typeof e.accepted == "function" ? e.accepted : function () { },
        f = typeof e.rejected == "function" ? e.rejected : function () { },
        u = typeof e.afterAction == "function" ? e.afterAction : function () { },
        l = typeof e.notAnswered == "function" ? e.notAnswered : function () { },
        k = typeof e.onAccept == "function" ? e.onAccept : function () { },
        w = typeof e.onReject == "function" ? e.onReject : function () { },
        v = typeof e.onNotAnswer == "function" ? e.onNotAnswer : function () { },
        C = typeof e.onRedraw == "function" ? e.onRedraw : function () { };

    function setCookie(value) {
        var date = new Date();
        date.setTime(date.getTime() + 31622400000); // 366 days
        var expires = "expires=" + date.toUTCString();
        document.cookie = n + "=" + value + ";" + expires + ";path=/";
    }

    function getCookie() {
        var match = document.cookie.match(RegExp("(^| )" + n + "=([^;]+)"));
        return !!match && match[2];
    }

    switch (getCookie()) {
        case "accepted":
            r();
            break;
        case "rejected":
            f();
            break;
        default:
            l();
    }

    window.addEventListener("DOMContentLoaded", function () {
        function drawBar() {
            var wrapper, content, controls, acceptBtn, rejectBtn;

            var status = getCookie();
            var existingBar = document.getElementById("acceptCookies");
            if (existingBar) existingBar.remove();

            if (!status) {
                wrapper = document.createElement("div");
                wrapper.id = "acceptCookies";
                wrapper.classList.add("acceptCookies");

                content = document.createElement("div");
                content.classList.add("acceptCookies-content");
                content.innerHTML = a;

                controls = document.createElement("div");
                controls.classList.add("acceptCookies-control");

                acceptBtn = document.createElement("button");
                acceptBtn.classList.add("acceptCookies-accept");
                acceptBtn.innerHTML = s;
                acceptBtn.addEventListener("click", function () {
                    setCookie("accepted");
                    k();
                    r();
                    u("accepted");
                    drawBar();
                });

                rejectBtn = document.createElement("button");
                rejectBtn.classList.add("acceptCookies-reject");
                rejectBtn.innerHTML = d;
                rejectBtn.addEventListener("click", function () {
                    if (c) {
                        document.cookie.split(";").forEach(function (cookie) {
                            document.cookie = cookie.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
                        });
                    }
                    setCookie("rejected");
                    w();
                    f();
                    u("rejected");
                    drawBar();
                });

                controls.append(acceptBtn);
                controls.append(rejectBtn);
                wrapper.append(content);
                wrapper.append(controls);
                document.body.append(wrapper);
            }

            C(document.getElementById("acceptCookies"));
        }

        drawBar();
    });
})();
