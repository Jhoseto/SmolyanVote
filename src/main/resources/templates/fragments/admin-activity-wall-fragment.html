<!-- Fragment: admin-activity-wall-fragment.html (FIXED) -->
<!-- –ü—ä—Ç: src/main/resources/templates/fragments/admin-activity-wall-fragment.html -->

<div th:fragment="activityWall" class="monitoring-section">
    <h2 class="section-header collapsible-header" data-toggle="activity-wall">
        <span><i class="bi bi-activity"></i> Real-time Activity Wall</span>
        <i class="bi bi-chevron-down collapse-icon"></i>
    </h2>

    <div class="collapsible-content" id="activity-wall">

        <!-- ===== CONNECTION STATUS INDICATOR ===== -->
        <div class="connection-status-bar mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <div class="connection-info">
                    <span class="connection-label">–°—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞:</span>
                    <span class="connection-status" id="connection-status">
                        <i class="bi bi-circle-fill text-secondary"></i>
                        <span>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–µ...</span>
                    </span>
                </div>
                <div class="system-info">
                    <small class="text-muted" id="system-info">
                        –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è...
                    </small>
                </div>
            </div>
        </div>

        <!-- ===== TIMELINE VISUALIZATION ===== -->
        <div class="activity-timeline-section">
            <div class="timeline-header">
                <h4><i class="bi bi-graph-up"></i> –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç –ø–æ —á–∞—Å–æ–≤–µ</h4>
                <div class="timeline-period" id="timeline-period">–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 24 —á–∞—Å–∞</div>
            </div>
            <div class="timeline-chart-container">
                <canvas id="activity-timeline-chart" width="800" height="200"></canvas>
                <div class="timeline-fallback" id="timeline-fallback" style="display: none;">
                    <div class="text-center text-muted p-4">
                        <i class="bi bi-graph-up" style="font-size: 2rem;"></i>
                        <p class="mt-2">–ì—Ä–∞—Ñ–∏–∫–∞—Ç–∞ —â–µ —Å–µ –ø–æ–∫–∞–∂–µ –∫–æ–≥–∞—Ç–æ Chart.js —Å–µ –∑–∞—Ä–µ–¥–∏</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== CONTROL PANEL ===== -->
        <div class="activity-control-panel">
            <!-- Live Status & Quick Actions -->
            <div class="control-section">
                <div class="live-status-indicator" id="live-status-indicator">
                    <div class="live-dot"></div>
                    <span class="live-text">Live</span>
                </div>

                <button id="activity-toggle-btn" class="control-btn control-btn-primary">
                    <i class="bi bi-pause-fill"></i>
                    <span>–ü–∞—É–∑–∞</span>
                </button>

                <button id="activity-refresh-btn" class="control-btn control-btn-secondary" title="–†—ä—á–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ">
                    <i class="bi bi-arrow-clockwise"></i>
                </button>

                <button id="activity-clear-btn" class="control-btn control-btn-danger" title="–ò–∑—á–∏—Å—Ç–∏ –≤—Å–∏—á–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏">
                    <i class="bi bi-trash"></i>
                    <span>–ò–∑—á–∏—Å—Ç–∏</span>
                </button>
            </div>

            <!-- Time Range Filters -->
            <div class="control-section">
                <span class="control-label">–ü–µ—Ä–∏–æ–¥:</span>
                <div class="time-range-buttons">
                    <button class="time-btn active" data-range="all">–í—Å–∏—á–∫–∏</button>
                    <button class="time-btn" data-range="1h">1—á</button>
                    <button class="time-btn" data-range="5h">5—á</button>
                    <button class="time-btn" data-range="12h">12—á</button>
                    <button class="time-btn" data-range="24h">24—á</button>
                    <button class="time-btn" data-range="48h">48—á</button>
                    <button class="time-btn" data-range="custom">–ü–µ—Ä—Å–æ–Ω.</button>
                </div>
            </div>

            <!-- Search Filters -->
            <div class="control-section">
                <span class="control-label">–§–∏–ª—Ç—Ä–∏:</span>
                <div class="search-filters">
                    <div class="filter-input-group">
                        <input type="text" id="user-search-input" class="filter-input"
                               placeholder="–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª..." autocomplete="off" maxlength="100">
                        <button id="clear-user-search" class="clear-filter-btn" style="display: none;" title="–ò–∑—á–∏—Å—Ç–∏ —Ñ–∏–ª—Ç—ä—Ä–∞">
                            <i class="bi bi-x"></i>
                        </button>
                    </div>

                    <div class="filter-input-group">
                        <input type="text" id="ip-search-input" class="filter-input"
                               placeholder="IP –∞–¥—Ä–µ—Å..." autocomplete="off" maxlength="45">
                        <button id="clear-ip-search" class="clear-filter-btn" style="display: none;" title="–ò–∑—á–∏—Å—Ç–∏ —Ñ–∏–ª—Ç—ä—Ä–∞">
                            <i class="bi bi-x"></i>
                        </button>
                    </div>

                    <select id="action-filter-select" class="filter-select" title="–§–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ –¥–µ–π—Å—Ç–≤–∏–µ">
                        <option value="">–í—Å–∏—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è</option>

                        <optgroup label="‚ïê‚ïê‚ïê –ü–£–ë–õ–ò–ö–ê–¶–ò–ò ‚ïê‚ïê‚ïê">
                            <option value="CREATE_PUBLICATION">–°—ä–∑–¥–∞–¥–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—è</option>
                            <option value="UPDATE_PUBLICATION">–†–µ–¥–∞–∫—Ç–∏—Ä–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è</option>
                            <option value="DELETE_PUBLICATION">–ò–∑—Ç—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è</option>
                            <option value="VIEW_PUBLICATION">–ü—Ä–µ–≥–ª–µ–¥–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—è</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –û–ü–†–û–°–¢–ï–ù –í–ò–î –°–™–ë–ò–¢–ò–ï ‚ïê‚ïê‚ïê">
                            <option value="CREATE_SIMPLE_EVENT">–°—ä–∑–¥–∞–¥–µ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                            <option value="UPDATE_SIMPLE_EVENT">–†–µ–¥–∞–∫—Ç–∏—Ä–∞ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                            <option value="DELETE_SIMPLE_EVENT">–ò–∑—Ç—Ä–∏ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                            <option value="VOTE_SIMPLE_EVENT">–ì–ª–∞—Å—É–≤–∞ –≤ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                            <option value="CHANGE_VOTE_SIMPLE_EVENT">–ü—Ä–æ–º–µ–Ω–∏ –≥–ª–∞—Å–∞ –≤ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                            <option value="VIEW_SIMPLE_EVENT">–ü—Ä–µ–≥–ª–µ–¥–∞ –æ–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –†–ï–§–ï–†–ï–ù–î–£–ú–ò ‚ïê‚ïê‚ïê">
                            <option value="CREATE_REFERENDUM">–°—ä–∑–¥–∞–¥–µ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º</option>
                            <option value="UPDATE_REFERENDUM">–†–µ–¥–∞–∫—Ç–∏—Ä–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º</option>
                            <option value="DELETE_REFERENDUM">–ò–∑—Ç—Ä–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º</option>
                            <option value="VOTE_REFERENDUM">–ì–ª–∞—Å—É–≤–∞ –≤ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º</option>
                            <option value="CHANGE_VOTE_REFERENDUM">–ü—Ä–æ–º–µ–Ω–∏ –≥–ª–∞—Å–∞ –≤ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º</option>
                            <option value="VIEW_REFERENDUM">–ü—Ä–µ–≥–ª–µ–¥–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –ê–ù–ö–ï–¢–ò –° –ú–ù–û–ñ–ï–°–¢–í–ï–ù –ò–ó–ë–û–† ‚ïê‚ïê‚ïê">
                            <option value="CREATE_MULTI_POLL">–°—ä–∑–¥–∞–¥–µ –∞–Ω–∫–µ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                            <option value="UPDATE_MULTI_POLL">–†–µ–¥–∞–∫—Ç–∏—Ä–∞ –∞–Ω–∫–µ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                            <option value="DELETE_MULTI_POLL">–ò–∑—Ç—Ä–∏ –∞–Ω–∫–µ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                            <option value="VOTE_MULTI_POLL">–ì–ª–∞—Å—É–≤–∞ –≤ –∞–Ω–∫–µ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                            <option value="CHANGE_VOTE_MULTI_POLL">–ü—Ä–æ–º–µ–Ω–∏ –≥–ª–∞—Å–∞ –≤ –∞–Ω–∫–µ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                            <option value="VIEW_MULTI_POLL">–ü—Ä–µ–≥–ª–µ–¥–∞ –∞–Ω–∫–µ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –°–ò–ì–ù–ê–õ–ò ‚ïê‚ïê‚ïê">
                            <option value="CREATE_SIGNAL">–ü–æ–¥–∞–¥–µ —Å–∏–≥–Ω–∞–ª</option>
                            <option value="UPDATE_SIGNAL">–†–µ–¥–∞–∫—Ç–∏—Ä–∞ —Å–∏–≥–Ω–∞–ª</option>
                            <option value="DELETE_SIGNAL">–ò–∑—Ç—Ä–∏ —Å–∏–≥–Ω–∞–ª</option>
                            <option value="VIEW_SIGNAL">–ü—Ä–µ–≥–ª–µ–¥–∞ —Å–∏–≥–Ω–∞–ª</option>
                            <option value="RESOLVE_SIGNAL">–†–µ—à–∏ —Å–∏–≥–Ω–∞–ª–∞</option>
                            <option value="ASSIGN_SIGNAL">–ù–∞–∑–Ω–∞—á–∏ —Å–∏–≥–Ω–∞–ª–∞</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –ö–û–ú–ï–ù–¢–ê–†–ò ‚ïê‚ïê‚ïê">
                            <option value="CREATE_COMMENT">–ö–æ–º–µ–Ω—Ç–∏—Ä–∞</option>
                            <option value="UPDATE_COMMENT">–†–µ–¥–∞–∫—Ç–∏—Ä–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä</option>
                            <option value="DELETE_COMMENT">–ò–∑—Ç—Ä–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</option>
                            <option value="REPLY_COMMENT">–û—Ç–≥–æ–≤–æ—Ä–∏ –Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –†–ï–ê–ö–¶–ò–ò ‚ïê‚ïê‚ïê">
                            <option value="LIKE_CONTENT">–•–∞—Ä–µ—Å–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                            <option value="UNLIKE_CONTENT">–ü—Ä–µ–º–∞—Ö–Ω–∞ —Ö–∞—Ä–µ—Å–≤–∞–Ω–µ</option>
                            <option value="DISLIKE_CONTENT">–ù–µ —Ö–∞—Ä–µ—Å–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                            <option value="REMOVE_DISLIKE">–ü—Ä–µ–º–∞—Ö–Ω–∞ –Ω–µ—Ö–∞—Ä–µ—Å–≤–∞–Ω–µ</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –ê–í–¢–ï–ù–¢–ò–ö–ê–¶–ò–Ø ‚ïê‚ïê‚ïê">
                            <option value="LOGIN">–í–ª–µ–∑–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞</option>
                            <option value="LOGOUT">–ò–∑–ª–µ–∑–µ –æ—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∞</option>
                            <option value="REGISTER">–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞ —Å–µ</option>
                            <option value="FAILED_LOGIN">–ù–µ—É—Å–ø–µ—à–µ–Ω –æ–ø–∏—Ç –∑–∞ –≤—Ö–æ–¥</option>
                            <option value="PASSWORD_RESET_REQUEST">–ó–∞—è–≤–∏ —Å–º—è–Ω–∞ –Ω–∞ –ø–∞—Ä–æ–ª–∞</option>
                            <option value="PASSWORD_RESET_COMPLETE">–°–º–µ–Ω–∏ –ø–∞—Ä–æ–ª–∞—Ç–∞</option>
                            <option value="EMAIL_VERIFICATION">–ü–æ—Ç–≤—ä—Ä–¥–∏ –∏–º–µ–π–ª–∞</option>
                            <option value="RESEND_VERIFICATION">–ò–∑–ø—Ä–∞—Ç–∏ –æ—Ç–Ω–æ–≤–æ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –ü–†–û–§–ò–õ ‚ïê‚ïê‚ïê">
                            <option value="UPDATE_PROFILE">–û–±–Ω–æ–≤–∏ –ø—Ä–æ—Ñ–∏–ª–∞</option>
                            <option value="CHANGE_AVATAR">–°–º–µ–Ω–∏ —Å–Ω–∏–º–∫–∞—Ç–∞</option>
                            <option value="CHANGE_PASSWORD">–°–º–µ–Ω–∏ –ø–∞—Ä–æ–ª–∞—Ç–∞</option>
                            <option value="UPDATE_EMAIL">–°–º–µ–Ω–∏ –∏–º–µ–π–ª–∞</option>
                            <option value="DEACTIVATE_ACCOUNT">–î–µ–∞–∫—Ç–∏–≤–∏—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–∞</option>
                            <option value="REACTIVATE_ACCOUNT">–ê–∫—Ç–∏–≤–∏—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–∞</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –§–ê–ô–õ–û–í–ï ‚ïê‚ïê‚ïê">
                            <option value="UPLOAD_IMAGE">–ö–∞—á–∏ —Å–Ω–∏–º–∫–∞</option>
                            <option value="DELETE_IMAGE">–ò–∑—Ç—Ä–∏ —Å–Ω–∏–º–∫–∞</option>
                            <option value="UPLOAD_DOCUMENT">–ö–∞—á–∏ –¥–æ–∫—É–º–µ–Ω—Ç</option>
                            <option value="DELETE_DOCUMENT">–ò–∑—Ç—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –ê–î–ú–ò–ù –î–ï–ô–°–¢–í–ò–Ø ‚ïê‚ïê‚ïê">
                            <option value="ADMIN_LOGIN">–ê–¥–º–∏–Ω –≤—Ö–æ–¥</option>
                            <option value="BAN_USER">–ë–ª–æ–∫–∏—Ä–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</option>
                            <option value="UNBAN_USER">–†–∞–∑–±–ª–æ–∫–∏—Ä–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</option>
                            <option value="DELETE_USER_CONTENT">–ò–∑—Ç—Ä–∏ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</option>
                            <option value="MODERATE_CONTENT">–ú–æ–¥–µ—Ä–∏—Ä–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                            <option value="APPROVE_CONTENT">–û–¥–æ–±—Ä–∏ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                            <option value="REJECT_CONTENT">–û—Ç—Ö–≤—ä—Ä–ª–∏ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                            <option value="WARN_USER">–ü—Ä–µ–¥—É–ø—Ä–µ–¥–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</option>
                            <option value="PROMOTE_USER">–ü–æ–≤–∏—à–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</option>
                            <option value="DEMOTE_USER">–ü–æ–Ω–∏–∂–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –ù–ê–í–ò–ì–ê–¶–ò–Ø ‚ïê‚ïê‚ïê">
                            <option value="SEARCH_CONTENT">–¢—ä—Ä—Å–∏ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                            <option value="VIEW_HOMEPAGE">–ü–æ—Å–µ—Ç–∏ –Ω–∞—á–∞–ª–Ω–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞</option>
                            <option value="VIEW_PROFILE">–ü—Ä–µ–≥–ª–µ–¥–∞ –ø—Ä–æ—Ñ–∏–ª</option>
                            <option value="VIEW_ADMIN_DASHBOARD">–û—Ç–≤–æ—Ä–∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –°–ò–°–¢–ï–ú–ù–ò ‚ïê‚ïê‚ïê">
                            <option value="SYSTEM_BACKUP">–°–∏—Å—Ç–µ–º–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ –∫–æ–ø–∏–µ</option>
                            <option value="SYSTEM_MAINTENANCE">–°–∏—Å—Ç–µ–º–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞</option>
                            <option value="DATABASE_CLEANUP">–ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏</option>
                            <option value="CACHE_CLEAR">–ò–∑—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ –∫–µ—à–∞</option>
                            <option value="EMAIL_SENT">–ò–∑–ø—Ä–∞—Ç–∏ –∏–º–µ–π–ª</option>
                            <option value="EMAIL_FAILED">–ù–µ—É—Å–ø–µ—à–µ–Ω –∏–º–µ–π–ª</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –°–ò–ì–£–†–ù–û–°–¢ ‚ïê‚ïê‚ïê">
                            <option value="SUSPICIOUS_ACTIVITY">–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç</option>
                            <option value="BLOCKED_REQUEST">–ë–ª–æ–∫–∏—Ä–∞–Ω–∞ –∑–∞—è–≤–∫–∞</option>
                            <option value="CSRF_ATTACK_BLOCKED">–ë–ª–æ–∫–∏—Ä–∞–Ω–∞ CSRF –∞—Ç–∞–∫–∞</option>
                            <option value="SPAM_DETECTED">–û—Ç–∫—Ä–∏—Ç —Å–ø–∞–º</option>
                            <option value="BOT_DETECTED">–û—Ç–∫—Ä–∏—Ç –±–æ—Ç</option>
                        </optgroup>

                        <optgroup label="‚ïê‚ïê‚ïê –î–†–£–ì–ò ‚ïê‚ïê‚ïê">
                            <option value="EXPORT_DATA">–ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ –¥–∞–Ω–Ω–∏</option>
                            <option value="IMPORT_DATA">–ò–º–ø–æ—Ä—Ç –Ω–∞ –¥–∞–Ω–Ω–∏</option>
                            <option value="GENERATE_REPORT">–ì–µ–Ω–µ—Ä–∏—Ä–∞ –æ—Ç—á–µ—Ç</option>
                            <option value="SCHEDULE_TASK">–ü–ª–∞–Ω–∏—Ä–∞ –∑–∞–¥–∞—á–∞</option>
                            <option value="COMPLETE_TASK">–ó–∞–≤—ä—Ä—à–∏ –∑–∞–¥–∞—á–∞</option>
                        </optgroup>
                    </select>

                    <select id="entity-filter-select" class="filter-select" title="–§–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ —Ç–∏–ø —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ">
                        <option value="">–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</option>
                        <option value="PUBLICATION">üìÑ –ü—É–±–ª–∏–∫–∞—Ü–∏–∏</option>
                        <option value="SIMPLEEVENT">üé™ –û–ø—Ä–æ—Å—Ç–µ–Ω –≤–∏–¥ —Å—ä–±–∏—Ç–∏–µ</option>
                        <option value="REFERENDUM">üó≥Ô∏è –†–µ—Ñ–µ—Ä–µ–Ω–¥—É–º–∏</option>
                        <option value="MULTI_POLL">üìä –ê–Ω–∫–µ—Ç–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω –∏–∑–±–æ—Ä</option>
                        <option value="SIGNAL">üö® –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏ —Å–∏–≥–Ω–∞–ª–∏</option>
                        <option value="COMMENT">üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä–∏</option>
                        <option value="USER">üë§ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</option>
                        <option value="SYSTEM">‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω–∏</option>
                        <option value="OTHER">üìã –î—Ä—É–≥–∏</option>
                    </select>
                </div>
            </div>

            <!-- Actions -->
            <div class="control-section">
                <button id="activity-export-btn" class="control-btn control-btn-success" title="–ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ">
                    <i class="bi bi-download"></i>
                    <span>–ï–∫—Å–ø–æ—Ä—Ç</span>
                </button>

                <button id="activity-reset-filters-btn" class="control-btn control-btn-outline" title="–ù—É–ª–∏—Ä–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Ñ–∏–ª—Ç—Ä–∏">
                    <i class="bi bi-arrow-counterclockwise"></i>
                    <span>–ù—É–ª–∏—Ä–∞–Ω–µ</span>
                </button>
            </div>
        </div>

        <!-- ===== CUSTOM DATE RANGE (—Å–∫—Ä–∏—Ç–∞ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ) ===== -->
        <div id="custom-date-range" class="custom-date-range" style="display: none;">
            <div class="date-range-inputs">
                <div class="date-input-group">
                    <label for="date-start-input">–û—Ç:</label>
                    <input type="datetime-local" id="date-start-input" class="date-input" title="–ù–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞ –∏ —á–∞—Å">
                </div>
                <div class="date-input-group">
                    <label for="date-end-input">–î–æ:</label>
                    <input type="datetime-local" id="date-end-input" class="date-input" title="–ö—Ä–∞–π–Ω–∞ –¥–∞—Ç–∞ –∏ —á–∞—Å">
                </div>
                <button id="apply-date-range-btn" class="control-btn control-btn-primary" title="–ü—Ä–∏–ª–æ–∂–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥">
                    <i class="bi bi-check"></i>
                    <span>–ü—Ä–∏–ª–æ–∂–∏</span>
                </button>
            </div>
        </div>

        <!-- ===== STATISTICS CARDS ===== -->
        <div class="activity-stats-grid">
            <div class="stats-card">
                <div class="stats-icon">
                    <i class="bi bi-list-ul"></i>
                </div>
                <div class="stats-content">
                    <div class="stats-number" id="total-activities-count">0</div>
                    <div class="stats-label">–û–±—â–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                </div>
            </div>

            <div class="stats-card">
                <div class="stats-icon">
                    <i class="bi bi-funnel"></i>
                </div>
                <div class="stats-content">
                    <div class="stats-number" id="filtered-activities-count">0</div>
                    <div class="stats-label">–§–∏–ª—Ç—Ä–∏—Ä–∞–Ω–∏</div>
                </div>
            </div>

            <div class="stats-card">
                <div class="stats-icon">
                    <i class="bi bi-people"></i>
                </div>
                <div class="stats-content">
                    <div class="stats-number" id="active-users-count">0</div>
                    <div class="stats-label">–ê–∫—Ç–∏–≤–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</div>
                </div>
            </div>

            <div class="stats-card">
                <div class="stats-icon">
                    <i class="bi bi-clock"></i>
                </div>
                <div class="stats-content">
                    <div class="stats-number" id="last-update-time">--</div>
                    <div class="stats-label">–ü–æ—Å–ª–µ–¥–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ</div>
                </div>
            </div>
        </div>

        <!-- ===== ACTIVITY STREAM ===== -->
        <div class="activity-stream-section">
            <div class="stream-header">
                <h4><i class="bi bi-stream"></i> Activity Stream</h4>
                <div class="stream-controls">
                    <div class="pagination-info">
                        <span id="pagination-info">–ü–æ–∫–∞–∑–≤–∞–Ω–µ 1-20 –æ—Ç 0</span>
                    </div>
                    <div class="pagination-controls">
                        <button id="prev-page-btn" class="pagination-btn" disabled title="–ü—Ä–µ–¥–∏—à–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                            <i class="bi bi-chevron-left"></i>
                        </button>
                        <span id="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –æ—Ç 1</span>
                        <button id="next-page-btn" class="pagination-btn" disabled title="–°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
                            <i class="bi bi-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="activity-table-container">
                <table class="activity-table" id="activity-table">
                    <thead>
                    <tr>
                        <th class="col-time">–í—Ä–µ–º–µ</th>
                        <th class="col-user">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</th>
                        <th class="col-action">–î–µ–π—Å—Ç–≤–∏–µ</th>
                        <th class="col-entity">–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</th>
                        <th class="col-ip">IP –∞–¥—Ä–µ—Å</th>
                        <th class="col-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                    </thead>
                    <tbody id="activity-table-body">
                    <tr id="loading-row">
                        <td colspan="6" class="loading-cell">
                            <div class="loading-content">
                                <div class="loading-spinner"></div>
                                <span>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="empty-state" style="display: none;">
                <div class="empty-icon">
                    <i class="bi bi-inbox"></i>
                </div>
                <h3>–ù—è–º–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                <p>–ù–µ —Å–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞—â–∏ –Ω–∞ –∑–∞–¥–∞–¥–µ–Ω–∏—Ç–µ —Ñ–∏–ª—Ç—Ä–∏.</p>
                <button id="clear-filters-btn" class="control-btn control-btn-primary">
                    <i class="bi bi-funnel-fill"></i>
                    <span>–ò–∑—á–∏—Å—Ç–∏ —Ñ–∏–ª—Ç—Ä–∏—Ç–µ</span>
                </button>
            </div>
        </div>

        <!-- ===== ERROR STATE ===== -->
        <div id="error-state" class="error-state" style="display: none;">
            <div class="error-icon">
                <i class="bi bi-exclamation-triangle text-danger"></i>
            </div>
            <h3>–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞</h3>
            <p id="error-message">–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏—Ç–µ.</p>
            <div class="error-actions">
                <button id="retry-btn" class="control-btn control-btn-primary">
                    <i class="bi bi-arrow-clockwise"></i>
                    <span>–û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ</span>
                </button>
                <button id="report-error-btn" class="control-btn control-btn-outline">
                    <i class="bi bi-bug"></i>
                    <span>–°—ä–æ–±—â–∏ –∑–∞ –≥—Ä–µ—à–∫–∞—Ç–∞</span>
                </button>
            </div>
        </div>

    </div>
</div>

<!-- ===== ACTIVITY DETAILS MODAL (IMPROVED) ===== -->
<div th:fragment="activityModal" class="modal fade" id="activity-details-modal" tabindex="-1"
     aria-labelledby="activityDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="activityDetailsModalLabel">
                    <i class="bi bi-info-circle me-2"></i>–î–µ—Ç–∞–π–ª–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label class="detail-label">ID:</label>
                            <div id="modal-activity-id" class="detail-value">--</div>
                        </div>
                        <div class="detail-group">
                            <label class="detail-label">–í—Ä–µ–º–µ:</label>
                            <div id="modal-activity-timestamp" class="detail-value">--</div>
                        </div>
                        <div class="detail-group">
                            <label class="detail-label">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª:</label>
                            <div id="modal-activity-username" class="detail-value">--</div>
                        </div>
                        <div class="detail-group">
                            <label class="detail-label">–î–µ–π—Å—Ç–≤–∏–µ:</label>
                            <div id="modal-activity-action" class="detail-value">--</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label class="detail-label">–¢–∏–ø —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:</label>
                            <div id="modal-activity-entity-type" class="detail-value">--</div>
                        </div>
                        <div class="detail-group">
                            <label class="detail-label">ID –Ω–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ:</label>
                            <div id="modal-activity-entity-id" class="detail-value">--</div>
                        </div>
                        <div class="detail-group">
                            <label class="detail-label">IP –∞–¥—Ä–µ—Å:</label>
                            <div id="modal-activity-ip" class="detail-value">--</div>
                        </div>
                        <div class="detail-group">
                            <label class="detail-label">User Agent:</label>
                            <div id="modal-activity-user-agent" class="detail-value text-break"
                                 style="max-height: 100px; overflow-y: auto;">--</div>
                        </div>
                    </div>
                </div>

                <div class="detail-group full-width">
                    <label class="detail-label">–î–µ—Ç–∞–π–ª–∏:</label>
                    <div id="modal-activity-details" class="detail-value detail-box"
                         style="max-height: 150px; overflow-y: auto;">--</div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="copy-activity-details" class="btn btn-outline-primary" title="–ö–æ–ø–∏—Ä–∞–π –≤—Å–∏—á–∫–∏ –¥–µ—Ç–∞–π–ª–∏">
                    <i class="bi bi-clipboard me-2"></i>–ö–æ–ø–∏—Ä–∞–π –¥–µ—Ç–∞–π–ª–∏—Ç–µ
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞—Ç–≤–æ—Ä–∏</button>
            </div>
        </div>
    </div>
</div>
