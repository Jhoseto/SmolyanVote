<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Детайли за събитие</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/eventDetailView.css">
</head>
<body>

<!-- Навигация -->
<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="background" style="background: rgba(255, 255, 255, 0.7) url('/images/web/createEventBackground1.png') no-repeat center -290px;">
    <div class="event-card">

        <!-- Заглавие -->
        <h1 class="header" th:text="${eventDetail.title}">Заглавие на събитието</h1>

        <!-- Автор -->
        <div class="creator">
            <img class="creator-img"
                 th:src="${eventDetail.creatorImage}"
                 alt="Създател"/>
            <span class="creator-name" th:text="${eventDetail.creatorName}">Име на създателя</span>
        </div>


        <!-- Галерия -->
        <div class="gallery" th:if="${eventDetail.imageUrls != null and !eventDetail.imageUrls.isEmpty()}">
            <img th:each="img : ${eventDetail.imageUrls}" th:src="${img}" alt="Снимка" />
        </div>

        <!-- Описание -->
        <div class="description">
            <p th:text="${eventDetail.description}">Тук е описанието на събитието.</p>
        </div>

        <!-- Допълнителни детайли -->
        <div class="details">
            <p>
                <strong>Дата на създаване:</strong>
                <span th:text="${#dates.format(eventDetail.createdAt, 'dd.MM.yyyy HH:mm')}">2025-04-18</span>
            </p>
            <p><strong>ID:</strong> <span th:text="${eventDetail.id}">#12345</span></p>
            <p><strong>Общо гласове:</strong> <span th:text="${eventDetail.totalVotes}">0</span></p>
        </div>

        <div class="voting">
            <h2>Резултати от гласуването</h2>

            <!-- За -->
            <div class="vote-bar-wrapper">
                <div class="vote-label" th:text="'За – ' + ${eventDetail.yesVotes} + ' гласа'">За</div>
                <div class="vote-bar">
                    <div class="bar for" th:style="'width:' + ${eventDetail.yesPercent} + '%'">
                        <span class="bar-text" th:text="${eventDetail.yesPercent} + '%'">0%</span>
                    </div>
                </div>
            </div>

            <!-- Против -->
            <div class="vote-bar-wrapper">
                <div class="vote-label" th:text="'Против – ' + ${eventDetail.noVotes} + ' гласа'">Против – 0 гласа</div>
                <div class="vote-bar">
                    <div class="bar against" th:style="'width:' + ${eventDetail.noPercent} + '%'">
                        <span class="bar-text" th:text="${eventDetail.noPercent} + '%'">0%</span>
                    </div>
                </div>
            </div>

            <!-- Въздържал се -->
            <div class="vote-bar-wrapper">
                <div class="vote-label" th:text="'Въздържал се – ' + ${eventDetail.neutralVotes} + ' гласа'">Въздържал се – 0 гласа</div>
                <div class="vote-bar">
                    <div class="bar abstain" th:style="'width:' + ${eventDetail.neutralPercent} + '%'">
                        <span class="bar-text" th:text="${eventDetail.neutralPercent} + '%'">0%</span>
                    </div>
                </div>
            </div>
        </div>




        <!-- Бутон за гласуване -->
        <div class="vote-section">
            <h3>Гласувай:</h3>
            <div class="vote-buttons">
                <form th:action="@{/vote}" method="post">
                    <input type="hidden" name="eventId" th:value="${eventDetail.id}" />
                    <button name="vote" value="yes" class="vote-btn yes" type="submit">За</button>
                    <button name="vote" value="no" class="vote-btn no" type="submit">Против</button>
                    <button name="vote" value="neutral" class="vote-btn neutral" type="submit">Въздържал се</button>
                </form>
            </div>
        </div>

    </div>
</div>

<!-- Футър -->
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
