<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ—Ñ–∏–ª –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è</title>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <!-- ‚úÖ Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/logo1.png">

    <link rel="stylesheet" href="/css/userProfile.css">
    <div th:replace="~{fragments/navbarStyles :: navbarStyles}"></div>
    <link rel="stylesheet" href="/css/simpleEventCard.css">

</head>
<body>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<div th:replace="~{fragments/navbar :: navbar}"></div>


<div class="profile-container">

    <!-- –ì–æ—Ä–Ω–∞ —Å–µ–∫—Ü–∏—è —Å –∫–æ—Ä–∏—Ü–∞ -->
    <div class="cover-photo">
        <!-- –ø–æ –∏–∑–±–æ—Ä, –º–æ–∂–µ –¥–∞ –¥–æ–±–∞–≤–∏—à –¥–∏–Ω–∞–º–∏—á–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="profile-info">
        <div class="profile-img">
            <img th:src="${user.getImageUrl()}" alt="–ü—Ä–æ—Ñ–∏–ª–Ω–∞ —Å–Ω–∏–º–∫–∞">
        </div>
        <div class="profile-details">
            <h2 class="username" th:text="${user.username}">–ò–º–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è</h2>
            <p class="bio" th:text="${user.bio}">‚Äû–¢—É–∫ –º–æ–∂–µ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞ —Å–µ–±–µ —Å–∏, –∏–Ω—Ç–µ—Ä–µ—Å–∏ –∏–ª–∏ –ª–∏—á–Ω–∞ –º–∏—Å–∏—è.‚Äú</p>
            <div class="stats">
                <span><strong th:text="${user.userEventsCount}"></strong> —Å—ä–±–∏—Ç–∏—è</span>
                <span><strong th:text="${user.totalVotes}"></strong> –≥–ª–∞—Å–∞</span>
            </div>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏–∏ —Å –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="profile-sections">

        <div class="section">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <ul class="list-unstyled">
                <li class="mb-2 d-flex align-items-center">
                    <!-- üìß –ò–∫–æ–Ω–∞ –∑–∞ –∏–º–µ–π–ª -->
                    <span style="margin-right: 10px;">üìß</span>
                    <span th:text="${user.email}"></span>
                </li>
                <li class="mb-2 d-flex align-items-center">
                    <!-- üìç –ò–∫–æ–Ω–∞ –∑–∞ –ª–æ–∫–∞—Ü–∏—è -->
                    <span style="margin-right: 10px;">üìç  </span>
                    <span th:text="${user.location != null ? user.location.toBG() : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞'}"></span>
                </li>
                <li class="mb-2 d-flex align-items-center">
                    <!-- üìÖ –ò–∫–æ–Ω–∞ –∑–∞ –¥–∞—Ç–∞ –Ω–∞ –ø—Ä–∏—Å—ä–µ–¥–∏–Ω—è–≤–∞–Ω–µ -->
                    <span style="margin-right: 10px;">üìÖ</span>
                    <span th:text="${user.created != null ? #dates.format(user.created, 'dd.MM.yyyy / HH:mm') : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}"></span>
                </li>
            </ul>




        </div>

        <div class="section">
            <h3>–†–µ–π—Ç–∏–Ω–≥</h3>
            <p>–ò–º–µ –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ + –∏–∫–æ–Ω–∞</p>
        </div>

    </div>

    <!-- –°–µ–∫—Ü–∏—è —Å—ä—Å —Å—ä–±–∏—Ç–∏—è -->
    <div class="user-events">
        <h3>–°—ä–±–∏—Ç–∏—è, —Å—ä–∑–¥–∞–¥–µ–Ω–∏ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è</h3>
        <div class="events-list">
            <!-- Thymeleaf —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ–Ω –∏–∑—Ö–æ–¥ —Ç—É–∫ -->
            <div th:each="event : ${userEvents}" th:insert="~{fragments/simpleEventView :: simple-event}"></div>
        </div>
    </div>
</div>

<!-- –§—É—Ç—ä—Ä -->
<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.event-card .card-title').forEach(title => {
            const maxHeight = 60; // –Ω–∞–ø—Ä. –º–∞–∫—Å–∏–º—É–º 60px –≤–∏—Å–æ—á–∏–Ω–∞
            let fontSize = parseFloat(getComputedStyle(title).fontSize);

            while (title.scrollHeight > maxHeight && fontSize > 10) {
                fontSize -= 1;
                title.style.fontSize = fontSize + 'px';
            }
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
